(()=>{"use strict";const e={main:document.querySelector("main"),confirmation:document.querySelector(".confirm_screen")},t=document.querySelector(".booking_form"),n=document.querySelector(".ticket"),r=n.innerHTML,i=t.querySelector(".book_button"),o=document.querySelector(".ticket_date_time"),c=document.querySelector(".ticket_seats"),l=document.querySelector(".ticket_total"),a=document.querySelector(".cancel_confirm_button"),s=document.querySelector(".confirm_button"),d={date:t.querySelector(".date_selector > .radio_control:checked").getAttribute("aria-label"),time:t.querySelector(".time_selector > .radio_control:checked").getAttribute("aria-label")};function u(t,n){Object.keys(e).forEach((n=>{if(e[n]===t)return e[n].classList.remove("hidden"),void e[n].classList.remove("tab_disabled");e[n].classList.add("hidden"),e[n].classList.add("tab_disabled")})),n.focus()}function m(e){return[...e.querySelectorAll(".seat_control:checked")]}const h=()=>{alert("Action disabled!")},f=()=>{m(t).forEach((e=>{e.click()}))},b=n=>{m(t).length>0&&u(e.confirmation,a),n.preventDefault()};function _(e){const[t,n]=e.id.split("_").slice(1);return{row:t,seat:n}}function k(e){if(e.length<=6)return e.map((e=>{const{row:t,seat:n}=_(e);return`<li>row#${t} seat:${n}</li>`})).join("");const t=e.reduce(((e,t)=>{const{row:n}=_(t);return e.includes(n)||e.push(n),e}),[]);let n="";return t.forEach((t=>{const r=[];e.forEach((e=>{const{row:n,seat:i}=_(e);t===n&&r.push(i)})),n+=`<li>row#${t} seat:${function(e){if(e.length<4)return e.join(",");const t=[[e[0]]];let n=0,r=1;for(;r<e.length;)e[r]-e[r-1]==1?t[n][1]=e[r]:(n+=1,t.push([e[r]])),r+=1;return t.map((e=>1===e.length?e[0]:e[1]-e[0]==1?e.join(","):e.join("-"))).join(",")}(r)}</li>`})),n}function L(){const e=m(t);if(0===e.length)return void(n.innerHTML=r);const i=t.querySelector(".date_selector > .radio_control:checked").getAttribute("aria-label"),a=t.querySelector(".time_selector > .radio_control:checked").getAttribute("aria-label");if(i!==d.date||a!==d.time)return e.forEach((e=>{e.checked=!1})),d.date=i,d.time=a,void(n.innerHTML=r);const s=20*e.length;n.innerHTML=`\n    <li class="ticket_header">Your order:</li>\n    <li>Movie: Interstellar</li>\n    <li>Date: ${i}</li>\n    <li>Time: ${a}</li>\n    <li>-------------</li>\n    ${k(e)}\n    <li>-------------</li>\n    <li>Number of seats:&nbsp;${e.length}</li>\n    <li>Price: $${s.toFixed(2)}</li>\n  `,o.innerHTML=`Show time: ${i}, ${a}`,c.innerHTML=k(e),l.innerHTML=`Number of seats:&nbsp;${e.length}</br>\n    Price: $${s.toFixed(2)}`}document.addEventListener("DOMContentLoaded",(()=>{t.addEventListener("change",L),i.addEventListener("click",b),a.addEventListener("click",f),a.addEventListener("click",(()=>u(e.main,i))),s.addEventListener("click",h)}))})();