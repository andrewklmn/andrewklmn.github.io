(()=>{"use strict";const e={main:document.querySelector("main"),confirmation:document.querySelector(".confirm_screen")},t=document.querySelector(".booking_form"),n=document.querySelector(".ticket"),i=n.innerHTML,r=t.querySelector(".book_button"),o=document.querySelector(".ticket_date_time"),c=document.querySelector(".ticket_seats"),l=document.querySelector(".ticket_total"),a=document.querySelector(".cancel_confirm_button"),d=document.querySelector(".confirm_button"),s={date:t.querySelector(".date_selector > .radio_control:checked").getAttribute("aria-label"),time:t.querySelector(".time_selector > .radio_control:checked").getAttribute("aria-label")};function u(t,n){Object.keys(e).forEach((n=>{if(e[n]===t)return e[n].classList.remove("hidden"),void e[n].classList.remove("tab_disabled");e[n].classList.add("hidden"),e[n].classList.add("tab_disabled")})),n.focus()}function m(e){return[...e.querySelectorAll(".seat_control:checked")]}const h=()=>{alert("Action disabled!")},f=()=>{m(t).forEach((e=>{e.click()}))},_=n=>{m(t).length>0&&u(e.confirmation,a),n.preventDefault()};function b(e){const t=e.id.split("_");return{row:t[1],seat:t[2]}}function k(){const e=m(t);if(0===e.length)return void(n.innerHTML=i);const r=t.querySelector(".date_selector > .radio_control:checked").getAttribute("aria-label"),a=t.querySelector(".time_selector > .radio_control:checked").getAttribute("aria-label");if(r!==s.date||a!==s.time)return e.forEach((e=>{e.checked=!1})),s.date=r,s.time=a,void(n.innerHTML=i);const d=20*e.length;n.innerHTML=`\n    <li class="ticket_header">Your order:</li>\n    <li>Movie: Interstellar</li>\n    <li>Date: ${r}</li>\n    <li>Time: ${a}</li>\n    <li>----------</li>\n    ${function(e){if(e.length<=6)return`<li>Seats</li>${e.map((e=>{const{row:t,seat:n}=b(e);return`<li>row ${t}: seat ${n}</li>`})).join("")}\n    <li>----------</li> \n    <li>Total: ${e.length} seats</li>`;const t=e.reduce(((e,t)=>{const{row:n}=b(t);return e.includes(n)||e.push(n),e}),[]);let n="<li>Row: Seats</li>";return t.forEach((t=>{const i=[];e.forEach((e=>{const{row:n,seat:r}=b(e);t===n&&i.push(r)})),n+=`<li>&nbsp;#${t}: ${function(e){if(e.length<4)return e.join(",");const t=[[e[0]]];let n=0,i=1;for(;i<e.length;)e[i]-e[i-1]==1?t[n][1]=e[i]:(n+=1,t.push([e[i]])),i+=1;return t.map((e=>1===e.length?e[0]:e[1]-e[0]==1?e.join(","):e.join("-"))).join(",")}(i)}</li>`})),n+="<li>----------</li>",n+=`<li>Total: ${e.length} seats</li>`,n}(e)}\n    <li>----------</li>\n    <li>Price: $${d.toFixed(2)}</li>\n  `,o.innerHTML=`Show time: ${r}, ${a}`,c.innerHTML=`${e.map((e=>{const t=e.id.split("_");return`<div>row #${t[1]}, seat #${t[2]}</div>`})).join("")}`,l.innerHTML=`Price: $${d.toFixed(2)}`}document.addEventListener("DOMContentLoaded",(()=>{t.addEventListener("change",k),r.addEventListener("click",_),a.addEventListener("click",f),a.addEventListener("click",(()=>u(e.main,r))),d.addEventListener("click",h)}))})();